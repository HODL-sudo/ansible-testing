---
- name: Configure Cisco router via SSH
  hosts: csr  # This should match an entry in your inventory
  connection: ansible.netcommon.network_cli
  gather_facts: no

  vars:
    ansible_network_os: cisco.ios.ios
    ansible_become: yes
    ansible_become_method: enable
    ansible_connection_transport_options:
      ansible_ssh_common_args: "-o PreferredAuthentications=password -o PubkeyAuthentication=no"
  tasks:
    - name: Show the running configuration
      cisco.ios.ios_command:
        commands:
          - show running-config
      register: output

    - name: Print the output
      debug:
        var: output.stdout_lines
